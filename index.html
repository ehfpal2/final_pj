<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ë¯¸ë‹ˆ í˜•ì„±í‰ê°€ ëª¨ìŒ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --bg: #f5eee2;
        --card-bg: #fff9ef;
        --border: #e0d2b8;
        --accent: #c49a6c;
        --accent-dark: #9a7747;
        --text-main: #3b2b1a;
        --text-sub: #75624a;
        --danger: #c75151;
        --radius-lg: 16px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: var(--bg);
        color: var(--text-main);
      }
      #app {
        max-width: 960px;
        margin: 24px auto 40px;
        padding: 0 16px;
      }
      h1 {
        text-align: center;
        margin-bottom: 8px;
      }
      .subtitle {
        text-align: center;
        color: var(--text-sub);
        margin-bottom: 24px;
        font-size: 0.95rem;
      }
      .card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        padding: 16px 20px;
        margin-bottom: 16px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03);
      }
      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }
      .card-title {
        font-weight: 600;
        font-size: 1.05rem;
      }
      .pill {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 999px;
        background: rgba(196, 154, 108, 0.12);
        color: var(--accent-dark);
        font-size: 0.8rem;
      }
      .row-space {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }
      .timer {
        font-weight: 600;
      }
      .timer span {
        font-family: "Consolas", "SF Mono", ui-monospace, monospace;
        font-size: 1.1rem;
      }
      button {
        border: none;
        border-radius: 999px;
        padding: 8px 16px;
        background: var(--accent);
        color: white;
        font-weight: 500;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.15s ease;
      }
      button:hover {
        background: var(--accent-dark);
        transform: translateY(-1px);
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
      }
      button.secondary {
        background: transparent;
        color: var(--accent-dark);
        border: 1px solid var(--accent);
      }
      button.secondary:hover {
        background: rgba(196, 154, 108, 0.1);
      }
      button.danger {
        background: var(--danger);
      }
      button.danger:hover {
        background: #a63c3c;
      }
      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }
      .hidden {
        display: none !important;
      }
      .question {
        border-radius: 12px;
        border: 1px dashed var(--border);
        padding: 8px 10px;
        margin-bottom: 8px;
        background: rgba(255, 255, 255, 0.7);
      }
      .question-label {
        font-size: 0.92rem;
        margin-bottom: 4px;
      }
      .question input[type="text"] {
        width: 100%;
        padding: 6px 8px;
        border-radius: 8px;
        border: 1px solid var(--border);
        font-size: 0.95rem;
      }
      .section-caption {
        font-size: 0.85rem;
        color: var(--text-sub);
        margin-top: 4px;
      }
      #summary-table table,
      #summary-table th,
      #summary-table td {
        border: 1px solid var(--border);
        border-collapse: collapse;
        padding: 4px 8px;
        font-size: 0.9rem;
      }
      #summary-table table {
        width: 100%;
        margin-top: 8px;
        background: white;
        border-radius: 12px;
        overflow: hidden;
      }
      #summary-table th {
        background: rgba(196, 154, 108, 0.1);
      }
      tr.clickable {
        cursor: pointer;
      }
      tr.clickable:hover {
        background: #f6efe3;
      }
      #chat-log {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 8px;
        height: 200px;
        overflow-y: auto;
        white-space: pre-wrap;
        margin-bottom: 8px;
        font-size: 0.9rem;
        background: #fffdf7;
      }
      .chat-user {
        font-weight: 600;
        color: var(--text-main);
      }
      .chat-assistant {
        color: var(--accent-dark);
      }
      #chat-input {
        width: 100%;
        padding: 8px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        font-size: 0.9rem;
        margin-bottom: 6px;
      }

      /* í•™ìƒ ì •ë³´ ì…ë ¥ */
      .field-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 8px;
      }
      .field {
        display: flex;
        flex-direction: column;
        min-width: 140px;
        flex: 1 1 0;
      }
      .field label {
        font-size: 0.85rem;
        color: var(--text-sub);
        margin-bottom: 2px;
      }
      .field input {
        border-radius: 999px;
        border: 1px solid var(--border);
        padding: 6px 10px;
        font-size: 0.9rem;
      }

      /* ====== í€´ì¦ˆ + ê·¸ë¦¼íŒ ë ˆì´ì•„ì›ƒ ====== */
      .quiz-body {
        display: flex;
        gap: 16px;
        align-items: flex-start;
        flex-wrap: wrap;
      }
      #scratchpad-container {
        flex: 0 0 250px;
        max-width: 250px;
        background: #fffdf7;
        border-radius: 12px;
        border: 1px solid var(--border);
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      #scratchpad-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-sub);
      }
      #scratchpad-toolbar {
        display: flex;
        gap: 6px;
        margin-bottom: 4px;
      }
      #scratchpad-toolbar button {
        padding: 4px 10px;
        font-size: 0.8rem;
      }
      #scratchpad {
        border-radius: 8px;
        border: 1px solid var(--border);
        background: #ffffff;
        width: 100%;
        height: 240px;
      }
      .quiz-questions {
        flex: 1 1 0;
        min-width: 0;
      }

      /* í™ˆ í™”ë©´ ì¹´ë“œë“¤ */
      .home-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
      }
      .home-card-title {
        font-weight: 600;
        margin-bottom: 4px;
      }
      .home-card-desc {
        font-size: 0.9rem;
        color: var(--text-sub);
        margin-bottom: 8px;
      }
      .home-card-badge {
        font-size: 0.8rem;
        color: var(--accent-dark);
        margin-bottom: 6px;
      }

      @media (max-width: 800px) {
        .quiz-body {
          flex-direction: column;
        }
        #scratchpad-container {
          max-width: 100%;
        }
      }

      @media (max-width: 600px) {
        .card {
          padding: 12px 14px;
        }
        h1 {
          font-size: 1.4rem;
        }
        .card-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 4px;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h1>ë¯¸ë‹ˆ í˜•ì„±í‰ê°€ ëª¨ìŒ</h1>
      <p class="subtitle">
        í™ˆì—ì„œ ë‹¨ì›ì„ ì„ íƒí•˜ê³ , ê° ë‹¨ì›ì˜ í˜•ì„±í‰ê°€ë¥¼ í’€ì–´ë³¼ ìˆ˜ ìˆì–´ìš”.
      </p>

      <!-- ğŸ  í™ˆ í™”ë©´ -->
      <section class="card" id="home-view">
        <div class="card-header">
          <div class="card-title">í˜•ì„±í‰ê°€ ì„ íƒ</div>
          <span class="pill">ë‹¨ì›ë³„ ë¯¸ë‹ˆ í…ŒìŠ¤íŠ¸</span>
        </div>
        <p class="section-caption">
          ì•ìœ¼ë¡œ ë‹¤ë¥¸ ë‹¨ì›(ë””ì§€í„¸ì½”ë“œ, ê°€ìƒë©”ëª¨ë¦¬, ë””ìŠ¤í¬ìŠ¤ì¼€ì¤„ë§ ë“±)ì„ ì—¬ê¸°ì— ê³„ì† ì¶”ê°€í•  ìˆ˜
          ìˆìŠµë‹ˆë‹¤.
        </p>
        <div class="home-grid">
          <!-- ì§„ë²• ë³€í™˜ ì¹´ë“œ -->
          <div class="card" style="margin-bottom: 0">
            <div class="home-card-title">ì§„ë²• ë³€í™˜ í˜•ì„±í‰ê°€</div>
            <div class="home-card-badge">2ì§„ìˆ˜ Â· 8ì§„ìˆ˜ Â· 10ì§„ìˆ˜ Â· 16ì§„ìˆ˜</div>
            <p class="home-card-desc">
              5ë¶„ ì•ˆì— ì§„ë²• ë³€í™˜ 20ë¬¸ì œë¥¼ í’€ê³ , í‹€ë¦° ë¬¸ì œëŠ” AIì—ê²Œ ì›ë¦¬ë¥¼ ë¬¼ì–´ë³´ë©°
              ë‹¤ì‹œ í•™ìŠµí•©ë‹ˆë‹¤.
            </p>
            <button id="open-base-quiz-btn">ì§„ë²• ë³€í™˜ í˜•ì„±í‰ê°€ ì‹œì‘</button>
          </div>

          <!-- ì•ìœ¼ë¡œ ë„£ì„ ë‹¤ë¥¸ í˜•ì„±í‰ê°€ ì˜ˆì‹œ (ë¹„í™œì„±) -->
          <div class="card" style="opacity: 0.6; margin-bottom: 0">
            <div class="home-card-title">[ì˜ˆì •] ë””ì§€í„¸ì½”ë“œ</div>
            <div class="home-card-badge">ê°€ì¤‘ì¹˜ Â· ë¹„ê°€ì¤‘ì¹˜ Â· ìë³´ìˆ˜í™” ì½”ë“œ</div>
            <p class="home-card-desc">
              ì¶”í›„ ì´ ìë¦¬ì— ë””ì§€í„¸ì½”ë“œ í˜•ì„±í‰ê°€, ê°€ìƒë©”ëª¨ë¦¬ í˜•ì„±í‰ê°€ ë“±ì„ ì¶”ê°€í•  ìˆ˜
              ìˆìŠµë‹ˆë‹¤.
            </p>
            <button class="secondary" disabled>ì¤€ë¹„ ì¤‘</button>
          </div>
        </div>
      </section>

      <!-- ğŸ”¢ ì§„ë²• ë³€í™˜ í€´ì¦ˆ í™”ë©´ë“¤ -->

      <!-- íƒ€ì´ë¨¸ + ì‹œì‘ ë²„íŠ¼ + í•™ìƒ ì •ë³´ -->
      <section class="card hidden" id="control-section">
        <div class="card-header">
          <div class="card-title">[ì§„ë²• ë³€í™˜] í€´ì¦ˆ ì»¨íŠ¸ë¡¤</div>
          <span class="pill">ì´ 4ë‹¨ê³„ Â· 20ë¬¸ì œ Â· 5ë¶„ ì œí•œ</span>
        </div>

        <div class="field-row">
          <div class="field">
            <label for="student-id">í•™ë²ˆ</label>
            <input
              type="text"
              id="student-id"
              placeholder="ì˜ˆ: 10101"
              autocomplete="off"
            />
          </div>
          <div class="field">
            <label for="student-name">ì´ë¦„</label>
            <input
              type="text"
              id="student-name"
              placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
              autocomplete="off"
            />
          </div>
        </div>
        <p class="section-caption">
          í•™ë²ˆê³¼ ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì•¼ í€´ì¦ˆë¥¼ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”.
        </p>

        <div class="row-space">
          <div class="timer">ë‚¨ì€ ì‹œê°„: <span id="timer">05:00</span></div>
          <button id="startQuizBtn" disabled>í€´ì¦ˆ ì‹œì‘</button>
        </div>
      </section>

      <!-- í€´ì¦ˆ ì˜ì—­ -->
      <section class="card hidden" id="quiz-section">
        <div class="card-header">
          <div class="card-title">ë¬¸ì œ í’€ê¸°</div>
          <span class="pill" id="stage-label"></span>
        </div>

        <div class="quiz-body">
          <!-- ì™¼ìª½: ê·¸ë¦¼íŒ -->
          <div id="scratchpad-container">
            <div id="scratchpad-title">ì—°ìŠµì¥ (ë§ˆìš°ìŠ¤ë¡œ ìˆ«ìë¥¼ ì¨ë³´ì„¸ìš”)</div>
            <div id="scratchpad-toolbar">
              <button id="scratchpad-mode-btn">âœï¸ íœ</button>
              <button id="scratchpad-clear-btn" class="secondary">
                ğŸ§½ ì „ì²´ ì§€ìš°ê¸°
              </button>
            </div>
            <canvas id="scratchpad"></canvas>
            <p class="section-caption">
              ë¬¸ì œë¥¼ í’€ ë•Œ ê³„ì‚°ì‹ì´ í•„ìš”í•˜ë‹¤ë©´,<br />ë©”ëª¨ì¥ì„ ì´ìš©í•˜ì—¬ í’€ì–´ë³´ì„¸ìš”. 
            </p>
          </div>

          <!-- ì˜¤ë¥¸ìª½: ë¬¸ì œ -->
          <div class="quiz-questions">
            <div id="question-list"></div>

            <div class="row-space" style="margin-top: 8px">
              <button id="nextStageBtn">ë‹¤ìŒ ë‹¨ê³„ë¡œ</button>
              <button id="finishQuizBtn" class="secondary hidden">
                ì „ì²´ ì œì¶œ
              </button>
            </div>

            <p id="quiz-message" class="section-caption"></p>
          </div>
        </div>
      </section>

      <!-- ì •ë‹µ/ì˜¤ë‹µ ìš”ì•½ -->
      <section class="card hidden" id="summary-section">
        <div class="card-header">
          <div class="card-title">ì •ë‹µ/ì˜¤ë‹µ ìš”ì•½</div>
          <span class="pill">O / X / â–³ / â˜… ìŠ¤ì½”ì–´</span>
        </div>
        <div id="summary-table"></div>
      </section>

      <!-- í‹€ë¦° ë¬¸ì œ ë‹¤ì‹œ í’€ê¸° -->
      <section class="card hidden" id="review-section">
        <div class="card-header">
          <div class="card-title">í‹€ë¦° ë¬¸ì œ ë‹¤ì‹œ í’€ê¸°</div>
          <span class="pill">X â†’ â–³ ë˜ëŠ” â˜… ë„ì „</span>
        </div>
        <p id="review-question-text"></p>
        <input type="text" id="review-answer" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" />
        <button id="review-submit-btn">ë‹µì•ˆ ì œì¶œ</button>
        <p id="review-feedback" class="section-caption"></p>
      </section>

      <!-- Chatbot ì˜ì—­ -->
      <section class="card hidden" id="chat-section">
        <div class="card-header">
          <div class="card-title">ìƒì„±í˜• AIì—ê²Œ ì›ë¦¬ ë¬¼ì–´ë³´ê¸°</div>
          <span class="pill">ë‘ ë²ˆ í‹€ë¦° ë¬¸ì œ</span>
        </div>
        <p id="chat-hint" class="section-caption">
          âš  ì •ë‹µì„ ì§ì ‘ ë¬»ê¸°ë³´ë‹¤ëŠ”,<br />
          â€œì™œ ì´ëŸ° ì‹ìœ¼ë¡œ ê³„ì‚°í•˜ë‚˜ìš”?â€, â€œ2ì§„ìˆ˜ì—ì„œ 10ì§„ìˆ˜ë¡œ ë°”ê¿€ ë•Œ ì–´ë–¤ ê·œì¹™ì´
          ìˆë‚˜ìš”?â€ì²˜ëŸ¼<br />
          <b>ì›ë¦¬ë‚˜ ë°©ë²•</b>ì„ ì§ˆë¬¸í•´ ë³´ì„¸ìš”.
        </p>
        <div id="chat-log"></div>
        <input
          type="text"
          id="chat-input"
          placeholder="ê¶ê¸ˆí•œ ì ì„ ì…ë ¥í•˜ì„¸ìš” (Enterë¡œ ì „ì†¡)"
        />
        <button id="chat-send-btn">ì „ì†¡</button>
      </section>

      <!-- ìµœì¢… ìš”ì•½ -->
      <section class="card hidden" id="final-summary-section">
        <div class="card-header">
          <div class="card-title">ìµœì¢… ìš”ì•½</div>
          <span class="pill">ì²« ì‹œë„ + ì¬ë„ì „ ê²°ê³¼</span>
        </div>
        <div id="final-summary"></div>
        <div class="row-space" style="margin-top: 10px">
          <button id="submit-and-end-btn">ë§ˆë¬´ë¦¬í•˜ê³  ê¸°ë¡ ë‚¨ê¸°ê¸°</button>
          <button id="restart-quiz-btn" class="secondary">
            í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
          </button>

        </div>
        <p class="section-caption" id="final-message"></p>
      </section>
    </div>

    <!-- Vite ì—”íŠ¸ë¦¬ -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
